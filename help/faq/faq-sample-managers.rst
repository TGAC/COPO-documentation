.. _faq-sample-managers:

Sample managers
----------------

.. tip::

   To read the entire answer to a :abbr:`FAQ (Frequently Asked Question)`, click the arrow icon
   (|collapsible-item-arrow|) below any question to expand or collapse it.

.. raw:: html

  <hr>

How can I be assigned as a sample manager?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse:: Click to view answer

   .. raw:: html

      <br>

   * Make a request to the :email:`COPO team <ei.copo@earlham.ac.uk>` indicating the type of profile group
     that you would like to be assigned as a sample manager.

   * The permission will be granted after the request has been approved.

.. raw:: html

   <br>

How can I know if I have been assigned as a sample manager?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse:: Click to view answer

   .. raw:: html

      <br>

   * The |accept-reject-samples-navigation-button| button will be displayed on the web page.

   * The **accept/reject samples** web page will be displayed once the button is clicked.

   * Alternatively, if you can navigate to the `Accept/Reject Samples' web page <https://copo-project.org/copo/dtol_submission/accept_reject_sample>`__
     with an **Unauthorisation** error web page being displayed then, you are a sample manager.

.. raw:: html

   <br>

How can I search for a particular profile or sample on the Accept or reject web page?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse::   Click to view answer

   .. raw:: html

      <br>

   See :ref:`accept-reject-samples-query-profiles-and-samples` section for guidelines on querying profiles and sample
   records on the **Accept or Reject Samples** web page.

.. raw:: html

   <br>

How can I accept or reject samples that users have submitted?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse:: Click to view answer

   .. note::

      See :ref:`accessing-accept-reject-samples-web-page` section for guidelines on accessing the
      **Accept or Reject Samples** web page.


   See :ref:`accept-reject-samples` section for more information.

.. raw:: html

   <br>

How can I download sample manifests that have been submitted by manifest providers or sample submitters?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse:: Click to view answer

   .. raw:: html

      <br>

  See :ref:`Downloading submitted sample manifest <samples-submission-download-sample-manifest-sample-managers>` section for more
  information.

.. raw:: html

   <br>

Can I download permits that users have uploaded in COPO?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse::   Click to view answer

   .. raw:: html

      <br>

   Yes, on the **Accept or Reject Samples** web page, permits can be downloaded by selecting the desired sample record(s)
   then, clicking the |download-permits-button2| button on the web page.

   See :ref:`Downloading permits <permits-submission-download-permits-sample-managers>` section for more information.

.. raw:: html

   <br>

Can I view images that users have uploaded in COPO?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse::   Click to view answer

   .. raw:: html

      <br>

   Yes, on the **Accept or Reject Samples** web page, images can be viewed by selecting the desired sample record(s)
   then, clicking the |view-images-button2| button on the web page.

   See :ref:`Viewing images <image-submission-view-images-sample-managers>` section for more information.

.. raw:: html

  <br>

.. _faq-sample-managers-within-several-manifest-groups:

If I belong to more than one sample manager manifest group, how can I view or accept samples that belong to them?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse::   Click to view answer

   .. raw:: html

      <br>

   .. note::

      * The manifest dropdown menu will only be displayed on the **Accept or Reject samples** web page if you as a
        sample manager, belongs to more than one sample manager manifest group.

      * If the *dtol* sample manager group dropdown menu option is selected, both Aquatic Symbiosis Genomics (ASG)
        profiles and  Darwin Tree of Life (DToL) profiles will be displayed in the **All profiles** tab and/or
        **Profiles for My Sequencing Centre** the **Accept or Reject samples** web page will be displayed
        (if any exists).

   * Choose desired sample manager group from the manifest group dropdown menu.

   * Click the |accept-reject-samples-navigation-button| button to accept or reject samples.

     .. figure:: /assets/images/profiles/modals/profile_new_user_add_email_address_dialog.png
        :alt: Add email address dialog
        :align: center
        :target: https://raw.githubusercontent.com/TGAC/COPO-documentation/main/assets/images/profiles/modals/profile_new_user_add_email_address_dialog.png
        :class: with-shadow with-border

        **Accept or Reject samples: Email address prompt shown when a user logs into COPO for the first time**


   See :ref:`Viewing images <image-submission-view-images-sample-managers>` section for more information.

.. raw:: html

  <br>

.. _faq-sample-managers-samples-awaiting-another-review:

How can I tell if sample records are still awaiting review by another sample manager?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse::   Click to view answer

   .. raw:: html

      <br>

   * If samples require more than one sample manager to accept or reject them, the samples will be displayed in the
     **Pending Samples** tab until **all** sample managers have accepted them. Once all sample managers have accepted
     the samples, the samples will be displayed in the **Accepted Samples** tab.

     As shown in the image below, sample records that are awaiting another acceptance will be highlighted
     **yellow** or **amber** and the date when the records have been accepted will be displayed in the
     **Approval Date** column in the samples data table.

     Refer to the **Associated TOL (Tree of life) Project** column to view the associated project(s) that the sample
     record belongs to. See the image below for an illustration.

     .. figure:: /assets/images/samples/accept_reject_samples/ui/samples_accept_reject_awaiting_another_acceptance1.png
        :alt: Sample record awaiting another acceptance
        :align: center
        :target: https://raw.githubusercontent.com/TGAC/COPO-documentation/main/assets/images/samples/accept_reject_samples/ui/samples_accept_reject_awaiting_another_acceptance1.png
        :class: with-shadow with-border

        **Sample record highlighted in yellow awaiting another acceptance**

     .. raw:: html

        <br>

     .. figure:: /assets/images/samples/accept_reject_samples/ui/samples_accept_reject_awaiting_another_acceptance2.png
        :alt: Sample record awaiting another acceptance
        :align: center
        :target: https://raw.githubusercontent.com/TGAC/COPO-documentation/main/assets/images/samples/accept_reject_samples/ui/samples_accept_reject_awaiting_another_acceptance2.png
        :class: with-shadow with-border

        **Approval date displayed in the 'Approval Date' column of the samples data table**

     In the example above, the sample record is associated with both :abbr:`BGE (Biodiversity Genomics Europe)` and
     SANGER (Sanger Institute) (associated) project types. A :abbr:`BGE (Biodiversity Genomics Europe)` sample manager
     has accepted the sample record, which is reflected in the **Approval Date** column in the data table. The record
     is highlighted in yellow to indicate that it is still awaiting acceptance from another sample manager.

     .. raw:: html

        <br>

     .. hint::

        * The **Approval Date** column displays the date when the sample record was accepted by the sample manager as
          well as the associated project that the sample manager belongs to.

        * The **Associated TOL (Tree of life) Project** column displays the associated project that the sample record
          belongs to.

     After the sample record has been accepted by all sample managers, the sample record will be displayed in the
     **Accepted Samples** tab as shown in the image below.

     .. figure:: /assets/images/samples/accept_reject_samples/ui/samples_accept_reject_after_all_accepted1.png
        :alt: Sample record after all sample managers have accepted it
        :align: center
        :target: https://raw.githubusercontent.com/TGAC/COPO-documentation/main/assets/images/samples/accept_reject_samples/ui/samples_accept_reject_after_all_accepted1.png
        :class: with-shadow with-border

        **Sample record after all sample managers have accepted it**

     .. raw:: html

        <br>

     .. figure:: /assets/images/samples/accept_reject_samples/ui/samples_accept_reject_after_all_accepted2.png
        :alt: Updated approval date in the 'Approval Date' column of the samples data table
        :align: center
        :target: https://raw.githubusercontent.com/TGAC/COPO-documentation/main/assets/images/samples/accept_reject_samples/ui/samples_accept_reject_after_all_accepted2.png
        :class: with-shadow with-border

        **Approval date updated in the 'Approval Date' column of the samples data table**

     In the example above, the sample record is associated with two projects:
     :abbr:`BGE (Biodiversity Genomics Europe)` and SANGER (Sanger Institute), as shown in the
     **Associated TOL (Tree of Life) Project** column. The sample managers assigned to both associated project types have
     approved the sample record and the **Approval Date** column has been updated in the samples data table.

.. raw:: html

  <br>

How to check the status of samples that have been accepted or rejected as a sample manager?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse::   Click to view answer

   .. raw:: html

      <br>

   **Option 1**: Accepted samples can be viewed in the **Accepted Samples** tab while rejected samples can be found in
   the **Rejected Samples** tab on the **Accept or Reject Samples** web page.

   **Option 2**: The **Status** column in the samples data table will display the status of the sample record.

   **Option 3**: The **Error** column in the samples data table will display an error message if the sample record
   has been rejected or if there are any errors associated with the sample record.

   **Option 4**: The **Status** log will display a chronological list of the status of the sample record as shown in the
   images below. It is located on the right of the **Accept or Reject Samples** web page below the top navigation bar.

   .. figure:: /assets/images/samples/accept_reject_samples/ui/samples_accept_reject_status_log_collapsed.png
      :alt: Sample record status log collapsed
      :align: center
      :target: https://raw.githubusercontent.com/TGAC/COPO-documentation/main/assets/images/samples/accept_reject_samples/ui/samples_accept_reject_status_log_collapsed.png
      :class: with-shadow with-border
      :height: 200px

      **Sample record status log collapsed**

   .. raw:: html

      <br>

   .. figure:: /assets/images/samples/accept_reject_samples/ui/samples_accept_reject_status_log_expanded.png
      :alt: Sample record status log expanded
      :align: center
      :target: https://raw.githubusercontent.com/TGAC/COPO-documentation/main/assets/images/samples/accept_reject_samples/ui/samples_accept_reject_status_log_expanded.png
      :class: with-shadow with-border
      :height: 600px


      **Sample record status log expanded on hover**

   .. hint::

      If you hover over the **Status** log, it will expand to display more information about the status of the sample
      record.

.. raw:: html

  <br>

How can I get a better view of sample record information displayed on the Accept or Reject Samples web page?
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. collapse::   Click to view answer

   .. raw:: html

      <br>

   Click the |show-profile-panel-button| button to toggle the profile panel visibility on the
   **Accept or Reject Samples** web page to either hide the profile panel and view more sample records or show the
   profile panel to view more profiles.

.. raw:: html

   <hr>

..
    Images declaration
..

.. |accept-reject-samples-navigation-button| image:: /assets/images/samples/accept_reject_samples/buttons/samples_accept_reject_navigation_button.png
   :height: 4ex
   :class: no-scaled-link

.. |collapsible-item-arrow| image:: /assets/images/icons/collapsible_item_arrow.png
   :height: 2ex
   :class: no-scaled-link

.. |download-permits-button2| image:: /assets/images/buttons/permits_download_button2.png
   :height: 4ex
   :class: no-scaled-link

.. |show-profile-panel-button| image:: /assets/images/samples/accept_reject_samples/buttons/show_profile_panel_button.png
   :height: 4ex
   :class: no-scaled-link

.. |view-images-button2| image:: /assets/images/buttons/images_view_button2.png
   :height: 4ex
   :class: no-scaled-link

